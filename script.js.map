{"version":3,"sources":["webpack://workadventure-map-starter-kit/./src/index.ts","webpack://workadventure-map-starter-kit/webpack/startup"],"names":["console","log","openPopup","onEnterZone","onLeaveZone","loadSound","WA","soundConfig","volume","loop","rate","detune","delay","seek","mute","currentSound","currentJukeboxPopup","zone","buttons","title","fileName","map","track","label","className","callback","popup","play","close","stop"],"mappings":"oWAIAA,QAAQC,IAAI,+BAuCZ,MAAM,UAAEC,EAAS,YAAEC,EAAW,YAAEC,EAAW,UAAEC,GAAcC,GAKrDC,EAA2B,CAC/BC,OAAQ,EACRC,MAAM,EACNC,KAAM,EACNC,OAAQ,EACRC,MAAO,EACPC,KAAM,EACNC,MAAM,GA8CR,IAAIC,EAgBAC,EAAoC,KACxC,MAAMC,EAAO,aAGPC,EA/DS,CACb,CACEC,MAAO,iBACPC,SAAU,oBAEZ,CACED,MAAO,wCACPC,SAAU,yCAEZ,CACED,MAAO,kCACPC,SAAU,qCAEZ,CACED,MAAO,0BACPC,SAAU,6BAEZ,CACED,MAAO,0BACPC,SAAU,6BAEZ,CACED,MAAO,0CACPC,SAAU,8BAEZ,CACED,MAAO,sBACPC,SAAU,yBAEZ,CACED,MAAO,uCACPC,SAAU,wCAEZ,CACED,MAAO,uCACPC,SAAU,2CAEZ,CACED,MAAO,mBACPC,SAAU,qCAwBSC,KAAIC,IAAS,OAClCC,MAAOD,EAAMH,MACbK,UAAW,SACXC,UApBAL,EAoBwBE,EAAMF,SApBZM,GAAS,OAAD,6BACnBX,IACHA,QAAqBV,EAAU,gBAAgBe,MAE7CL,GACFA,EAAaY,KAAKpB,GAEpBmB,EAAME,aAPRR,SAuBFjB,EAAYc,GAAM,KACXD,IACHA,EAAsBd,EAVH,UACF,sCAS6CgB,OAGlEd,EAAYa,GAAM,KACZF,IACFA,EAAac,OACbd,EAAe,MAEbC,IACFA,EAAoBY,QACpBZ,EAAsB,YCvIN,Q","file":"script.js","sourcesContent":["/// <reference path=\"../node_modules/@workadventure/iframe-api-typings/iframe_api.d.ts\" />\n\n// You can write your WorkAdventure script here, if any.\n// The \"WA\" global object is available from anywhere.\nconsole.log('Script started successfully');\n// WA.openCoWebSite('https://workadventu.re');\n// WA.sendChatMessage('Hello you!', 'Tpacq bot');\n\n/**\n * TYPES\n */\ntype Popup = {\n  close: () => void;\n};\ntype ButtonClickedCallback = (popup: Popup) => void;\ntype ButtonDescriptor = {\n  label: string;\n  className?:\n    | 'normal'\n    | 'primary'\n    | 'success'\n    | 'warning'\n    | 'error'\n    | 'disabled';\n  callback: ButtonClickedCallback;\n};\ndeclare type SoundConfig = {\n  volume?: number;\n  loop?: boolean;\n  rate?: number;\n  detune?: number;\n  delay?: number;\n  seek?: number;\n  mute?: boolean;\n};\ndeclare class Sound {\n  play(soundConfig: SoundConfig | undefined): void;\n  stop(): void;\n}\n\n/**\n * WorkAdventureApi\n */\nconst { openPopup, onEnterZone, onLeaveZone, loadSound } = WA as any;\n\n/**\n * SOUNDS MANAGEMENT\n */\nconst soundConfig: SoundConfig = {\n  volume: 1,\n  loop: false,\n  rate: 1,\n  detune: 1,\n  delay: 0,\n  seek: 0,\n  mute: false,\n};\nconst trackPath = 'assets/music';\nconst tracks = [\n  {\n    title: 'Worakls - Elea',\n    fileName: 'worakls_elea.mp3',\n  },\n  {\n    title: 'Parra for Cuva - Luhya (Original Mix)',\n    fileName: 'parra-for-cuva_luhya_original-mix.mp3',\n  },\n  {\n    title: 'Cymande - Brothers On The Slide',\n    fileName: 'cymande_brothers-on-the-slide.mp3',\n  },\n  {\n    title: 'Zeigest - Wrecked Metal',\n    fileName: 'zeigest_wrecked-metal.mp3',\n  },\n  {\n    title: 'Fadoul - Bsslama Habiti',\n    fileName: 'fadoul_bsslama-habiti.mp3',\n  },\n  {\n    title: 'The Knife - Pass This On (Deep Cuts 03)',\n    fileName: 'the-knife_pass-this-on.mp3',\n  },\n  {\n    title: 'Kompromat - Niemand',\n    fileName: 'kompromat_niemand.mp3',\n  },\n  {\n    title: 'Peter Schilling - Völlig losgelöst',\n    fileName: 'peter-schilling_vollig-losgelost.mp3',\n  },\n  {\n    title: 'Galt MacDermot - Let The Sunshine In',\n    fileName: 'galt-mac-dermot_let-the-sunshine-in.mp3',\n  },\n  {\n    title: 'Amenofis - Regia',\n    fileName: 'amenofis_regia--original-mix.mp3',\n  },\n];\n\nlet currentSound: Sound | null;\n\nconst onSelectMusic: (fileName: string) => ButtonClickedCallback =\n  fileName => async popup => {\n    if (!currentSound) {\n      currentSound = await loadSound(`${trackPath}/${fileName}`);\n    }\n    if (currentSound) {\n      currentSound.play(soundConfig);\n    }\n    popup.close();\n  };\n\n/**\n * JUKEBOX POPUP\n */\nlet currentJukeboxPopup: Popup | null = null;\nconst zone = 'danceFloor';\nconst popupRectangle = 'jukebox';\nconst popupMessage = 'Which music do you wanna listen to?';\nconst buttons = tracks.map(track => ({\n  label: track.title,\n  className: 'normal',\n  callback: onSelectMusic(track.fileName),\n}));\n\nonEnterZone(zone, () => {\n  if (!currentJukeboxPopup) {\n    currentJukeboxPopup = openPopup(popupRectangle, popupMessage, buttons);\n  }\n});\nonLeaveZone(zone, () => {\n  if (currentSound) {\n    currentSound.stop();\n    currentSound = null;\n  }\n  if (currentJukeboxPopup) {\n    currentJukeboxPopup.close();\n    currentJukeboxPopup = null;\n  }\n});\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[607]();\n"],"sourceRoot":""}